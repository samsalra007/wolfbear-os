#!/bin/sh

mount -t proc none /proc
mount -t sysfs none /sys
mount -t devtmpfs none /dev

mkdir -p /dev/dri
# mknod -m 0666 /dev/dri/card0 c 226 0

mkdir -p /dev
mknod -m 0666 /dev/tty c 5 0
mknod -m 0666 /dev/console c 5 1

# export SDL_VIDEODRIVER=KMSDRM
# chmod 666 /dev/dri/card0

# Si hay hostname entonces lo configuramos para que cambie tambi√©n el comando
if [ -f /etc/hostname ]; then
    hostname "$(cat /etc/hostname)"
fi

# El while true evita el kernel panic al regresar de nuevo al login si la terminal getty finaliza
while true; do
	clear

	./apps/sdl_hello/sdl_hello.wbapp

	echo "WolfbearOS Development Version!"
	# /sbin/getty -L -a cheese ttyAMA0 115200 vt100
	/sbin/getty -L ttyAMA0 115200 vt1000

	echo "Woof bye!"
done
