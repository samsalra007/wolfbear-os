#!/bin/sh
set -euo pipefail

# Obt√©n la ruta real del script "install"
BASEDIR=$(cd "$(dirname "$0")" && pwd)
# Los scripts numerados est√°n en el mismo directorio que este script
SCRIPTS_DIR="$BASEDIR"

echo "üîÑ Ejecutando secuencialmente los scripts de instalaci√≥n‚Ä¶"

i=0
while :; do
  prefix=$(printf "%03d" "$i")

  # Expande el patr√≥n (efect√∫a globbing)
  set -- "$SCRIPTS_DIR/${prefix}-"*
  # Si no existe ning√∫n fichero coincidente, $1 ser√° literal y -e fallar√°
  if [ ! -e "$1" ]; then
    echo
    echo "‚úÖ Secuencia terminada en $prefix (no existe ${prefix}-*)"
    break
  fi

  # Ejecuta cada script existente y ejecutable
  for script in "$SCRIPTS_DIR/${prefix}-"*; do
    [ -f "$script" ] || continue
    [ -x "$script" ] || { echo "‚ö†Ô∏è Saltando $script (no es ejecutable)"; continue; }
    echo
    echo "‚ñ∂Ô∏è  Ejecutando $script"
    "$script"
  done

  i=$((i + 1))
done

echo
echo "‚úÖ Todos los scripts numerados han finalizado."
