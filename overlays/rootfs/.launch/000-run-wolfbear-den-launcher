
# /runs/launcher

#!/bin/sh
set -e

# 1) Fuerza plataforma (evita que intente xcb)
export QT_QPA_PLATFORM=eglfs

# 2) Plugins (ajusta ruta si tu Qt vive en otro prefijo)
export QT_PLUGIN_PATH=/usr/lib/qt6/plugins
export QML2_IMPORT_PATH=/usr/lib/qt6/qml
export QT_QPA_PLATFORM_PLUGIN_PATH=/usr/lib/qt6/plugins/platforms

# 3) Runtime limpio para embedded
export QT_LOGGING_RULES="qt.qpa.*=true"

# 4) EGLFS en KMS/DRM (recomendado)
export QT_QPA_EGLFS_INTEGRATION=eglfs_kms

# 5) Si usas DRM/card0 y tienes más de una GPU, fija cuál
# export QT_QPA_EGLFS_DRM_CARD=/dev/dri/card0

# 6) Opcional: si te estorba el cursor
export QT_QPA_EGLFS_HIDECURSOR=1

exec WolfbearDenLauncherApp